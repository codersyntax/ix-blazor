{"version":3,"names":["ArrowFocusController","constructor","items","container","callback","this","wrap","keyListenerBind","keyListener","bind","addEventListener","e","activeIndex","indexOf","document","activeElement","key","length","preventDefault","disconnect","removeEventListener"],"sources":["src/components/utils/focus.ts"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2023 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nexport class ArrowFocusController {\n  public items: Element[];\n\n  container: HTMLElement;\n  wrap = false;\n  callback: any;\n\n  private keyListenerBind = this.keyListener.bind(this);\n\n  constructor(\n    items: any[],\n    container: HTMLElement,\n    callback: (index: number) => void\n  ) {\n    this.items = items;\n    this.container = container;\n    this.callback = callback;\n\n    this.container.addEventListener('keydown', this.keyListenerBind);\n  }\n\n  private keyListener(e) {\n    const activeIndex = this.items.indexOf(document.activeElement);\n\n    if (activeIndex < 0) {\n      return;\n    }\n\n    switch (e.key) {\n      case 'ArrowDown':\n        if (activeIndex < this.items.length - 1) {\n          e.preventDefault();\n          if (this.callback) {\n            this.callback(activeIndex + 1);\n          }\n        } else if (this.wrap) {\n          e.preventDefault();\n          if (this.callback) {\n            this.callback(0);\n          }\n        }\n        break;\n\n      case 'ArrowUp':\n        {\n          if (activeIndex > 0) {\n            e.preventDefault();\n            if (this.callback) {\n              this.callback(activeIndex - 1);\n            }\n          } else if (this.wrap && activeIndex === 0) {\n            e.preventDefault();\n            if (this.callback) {\n              this.callback(this.items.length - 1);\n            }\n          }\n        }\n        break;\n    }\n  }\n\n  disconnect() {\n    this.container.removeEventListener('keydown', this.keyListenerBind);\n  }\n}\n"],"mappings":"MASaA,EASX,WAAAC,CACEC,EACAC,EACAC,GARFC,KAAAC,KAAO,MAGCD,KAAAE,gBAAkBF,KAAKG,YAAYC,KAAKJ,MAO9CA,KAAKH,MAAQA,EACbG,KAAKF,UAAYA,EACjBE,KAAKD,SAAWA,EAEhBC,KAAKF,UAAUO,iBAAiB,UAAWL,KAAKE,gB,CAG1C,WAAAC,CAAYG,GAClB,MAAMC,EAAcP,KAAKH,MAAMW,QAAQC,SAASC,eAEhD,GAAIH,EAAc,EAAG,CACnB,M,CAGF,OAAQD,EAAEK,KACR,IAAK,YACH,GAAIJ,EAAcP,KAAKH,MAAMe,OAAS,EAAG,CACvCN,EAAEO,iBACF,GAAIb,KAAKD,SAAU,CACjBC,KAAKD,SAASQ,EAAc,E,OAEzB,GAAIP,KAAKC,KAAM,CACpBK,EAAEO,iBACF,GAAIb,KAAKD,SAAU,CACjBC,KAAKD,SAAS,E,EAGlB,MAEF,IAAK,UACH,CACE,GAAIQ,EAAc,EAAG,CACnBD,EAAEO,iBACF,GAAIb,KAAKD,SAAU,CACjBC,KAAKD,SAASQ,EAAc,E,OAEzB,GAAIP,KAAKC,MAAQM,IAAgB,EAAG,CACzCD,EAAEO,iBACF,GAAIb,KAAKD,SAAU,CACjBC,KAAKD,SAASC,KAAKH,MAAMe,OAAS,E,GAIxC,M,CAIN,UAAAE,GACEd,KAAKF,UAAUiB,oBAAoB,UAAWf,KAAKE,gB"}