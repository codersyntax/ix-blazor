{"version":3,"names":["groupCss","IxGroupStyle0","Group","this","observer","groupItems","length","dropdownItems","Array","from","hostElement","querySelectorAll","groupContent","_a","shadowRoot","querySelector","onExpandClick","event","collapsed","collapsedChanged","emit","stopPropagation","onHeaderClick","setGroupSelection","selected","suppressHeaderSelection","onItemClick","index","newIndex","undefined","selectItem","itemSelected","selection","selectGroup","onSlotChange","slot","footerVisible","hasSlottedElements","componentWillRender","forEach","item","componentDidLoad","createMutationObserver","slotSize","observe","childList","addEventListener","evt","detail","suppressSelection","disconnectedCallback","disconnect","render","h","Host","key","class","expand","tabindex","onClick","e","hidden","showExpandCollapsedIcon","name","header","title","subHeader","style","display","onSlotchange","focusable","footer"],"sources":["src/components/group/group.scss?tag=ix-group&encapsulation=shadow","src/components/group/group.tsx"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2024 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n@import 'common-variables';\n@import 'legacy/mixins/fonts';\n@import 'mixins/hover';\n@import 'mixins/text-truncation';\n\n:host {\n  @include ellipsis;\n\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  max-width: 19.75rem;\n  border-color: var(--theme-group-item--border-color);\n\n  .group-header {\n    height: 4rem;\n    min-height: 4rem;\n    max-height: 4rem;\n    border-radius: var(--theme-group--border-radius)\n      var(--theme-group--border-radius) 0 0;\n    display: flex;\n    background-color: var(--theme-group-item--background);\n    color: var(--theme-group-header--color);\n\n    cursor: pointer;\n\n    @include hover {\n      background-color: var(--theme-group-item--background--hover);\n\n      &.selected {\n        background-color: var(--theme-group-item--background--selected);\n      }\n    }\n\n    @include active {\n      background-color: var(--theme-group-item--background--active);\n\n      &.selected {\n        background-color: var(--theme-group-item--background--selected);\n      }\n    }\n\n    @include focus-visible {\n      border: 1px solid var(--theme-color-focus-bdr);\n      border-radius: var(--theme-default-border-radius)\n        var(--theme-default-border-radius) 0px 0px;\n      outline: none;\n    }\n\n    &.selected {\n      background-color: var(--theme-group-item--background--selected);\n\n      .group-header-selection-indicator {\n        background-color: var(\n          --theme-group-item-indicator--background--selected\n        );\n      }\n    }\n\n    .group-header-selection-indicator {\n      background-color: var(--theme-color-input--focus);\n\n      &.group-header-selection-indicator-item-selected {\n        background-color: var(\n          --theme-group-item-indicator--background--selected\n        );\n      }\n    }\n  }\n\n  .group-header-clickable {\n    @include ellipsis;\n\n    display: flex;\n    width: 100%;\n    min-width: 0;\n  }\n\n  .group-header-selection-indicator {\n    width: $tiny-space;\n    border-top-left-radius: var(--theme-group--border-radius);\n  }\n\n  .group-header-content {\n    @include ellipsis;\n\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    min-width: 0;\n    flex-grow: 1;\n    flex-basis: 0;\n    padding: 0.5rem;\n    padding-left: 0;\n\n    .group-header-props-container {\n      width: 100%;\n    }\n\n    .group-header-title {\n      display: flex;\n      align-items: center;\n      font-size: 1rem;\n      font-weight: $font-weight-bold;\n      height: 1.5rem;\n\n      & > * {\n        @include ellipsis;\n\n        min-width: 0;\n        padding-right: 0;\n      }\n    }\n\n    .group-subheader {\n      @include ellipsis();\n\n      height: 1.25rem;\n      font-size: 0.875rem;\n      color: var(--theme-group-subheader--color);\n    }\n  }\n\n  .expand-icon {\n    padding: 0.125rem 0.437rem;\n    color: var(--theme-color-std-text);\n  }\n\n  .btn-expand-header {\n    margin: $small-space;\n    margin-inline-end: $tiny-space;\n    min-width: 1.5rem;\n  }\n\n  .group-content {\n    display: flex;\n    flex-direction: column;\n    gap: 1px;\n    margin-top: 1px;\n  }\n\n  .footer {\n    visibility: collapse;\n    height: auto;\n    min-height: 0;\n  }\n\n  .footer-visible {\n    visibility: visible;\n  }\n\n  .hidden {\n    display: none;\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2024 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Prop,\n  State,\n} from '@stencil/core';\nimport { createMutationObserver } from '../utils/mutation-observer';\nimport { hasSlottedElements } from '../utils/shadow-dom';\n\n@Component({\n  tag: 'ix-group',\n  styleUrl: 'group.scss',\n  shadow: true,\n})\nexport class Group {\n  @Element() hostElement!: HTMLIxGroupElement;\n\n  /**\n   * Prevent header from being selectable\n   */\n  @Prop() suppressHeaderSelection = false;\n\n  /**\n   * Group header\n   */\n  @Prop() header?: string;\n\n  /**\n   * Group header subtitle\n   */\n  @Prop() subHeader?: string;\n\n  /**\n   * Whether the group is collapsed or expanded. Defaults to true.\n   */\n  @Prop({ mutable: true, reflect: true }) collapsed = true;\n\n  /**\n   * Whether the group is selected.\n   */\n  @Prop({ mutable: true, reflect: true }) selected = false;\n\n  /**\n   * The index of the selected group entry.\n   * If undefined no group item is selected.\n   */\n  @Prop({ mutable: true, reflect: true }) index?: number;\n\n  /**\n   * Expand the group if the header is clicked\n   */\n  @Prop() expandOnHeaderClick = false;\n\n  /**\n   * Emits when whole group gets selected.\n   */\n  @Event() selectGroup!: EventEmitter<boolean>;\n\n  /**\n   * Emits when group item gets selected.\n   */\n  @Event() selectItem!: EventEmitter<number>;\n\n  /**\n   * Group collapsed\n   */\n  @Event() collapsedChanged!: EventEmitter<boolean>;\n\n  @State() itemSelected = false;\n  @State() slotSize = this.groupItems.length;\n  @State() footerVisible = false;\n\n  @State() showExpandCollapsedIcon = false;\n\n  private observer: MutationObserver = null!;\n\n  get dropdownItems() {\n    return Array.from(\n      this.hostElement.querySelectorAll('ix-group-dropdown-item')\n    );\n  }\n\n  get groupItems(): Array<HTMLIxGroupItemElement> {\n    return Array.from(\n      this.hostElement.querySelectorAll('ix-group-item:not(.footer)')\n    );\n  }\n\n  get groupContent() {\n    return this.hostElement.shadowRoot?.querySelector('.group-content');\n  }\n\n  private onExpandClick(event: Event) {\n    this.collapsed = !this.collapsed;\n\n    this.collapsedChanged.emit(this.collapsed);\n    event.stopPropagation();\n  }\n\n  private onHeaderClick(event: Event) {\n    this.setGroupSelection(!this.selected);\n\n    if (this.suppressHeaderSelection) {\n      this.onExpandClick(event);\n    }\n  }\n\n  private onItemClick(index?: number) {\n    const newIndex = index === this.index ? undefined : index;\n    this.selectItem.emit(newIndex);\n\n    this.index = newIndex;\n\n    if (this.index !== undefined && this.index >= 0) {\n      this.itemSelected = true;\n    } else this.itemSelected = false;\n\n    this.setGroupSelection(false);\n  }\n\n  private setGroupSelection(selection: boolean) {\n    if (!this.suppressHeaderSelection) {\n      this.selected = selection;\n      this.selectGroup.emit(this.selected);\n    }\n  }\n\n  private onSlotChange() {\n    const slot = this.hostElement.shadowRoot?.querySelector(\n      'slot[name=\"footer\"]'\n    );\n\n    if (slot) {\n      this.footerVisible = hasSlottedElements(slot);\n    }\n  }\n\n  componentWillRender() {\n    this.groupItems.forEach((item, index) => {\n      if (this.selected === true) {\n        item.selected = false;\n        this.index = undefined;\n        this.itemSelected = false;\n        return;\n      }\n      item.selected = index === this.index;\n      item.index = index;\n    });\n  }\n\n  componentDidLoad() {\n    this.observer = createMutationObserver(() => {\n      this.slotSize = this.groupItems.length;\n    });\n\n    if (!this.groupContent) {\n      return;\n    }\n\n    this.observer.observe(this.groupContent, {\n      childList: true,\n    });\n\n    this.groupContent?.addEventListener(\n      'selectedChanged',\n      (evt: CustomEvent<HTMLIxGroupItemElement>) => {\n        if (evt.detail.suppressSelection) {\n          evt.stopPropagation();\n          return;\n        }\n\n        this.onItemClick(evt.detail.index);\n      }\n    );\n  }\n\n  disconnectedCallback() {\n    if (this.observer) {\n      this.observer.disconnect();\n    }\n  }\n\n  render() {\n    return (\n      <Host>\n        <div\n          class={{\n            'group-header': true,\n            expand: !this.collapsed,\n            selected: this.selected,\n          }}\n          tabindex=\"0\"\n        >\n          <div\n            class=\"group-header-clickable\"\n            onClick={(e) => this.onHeaderClick(e)}\n          >\n            <div\n              class={{\n                'group-header-selection-indicator': true,\n                'group-header-selection-indicator-item-selected':\n                  this.itemSelected,\n              }}\n            ></div>\n            <div class=\"btn-expand-header\">\n              <ix-icon\n                data-testid=\"expand-collapsed-icon\"\n                class={{\n                  hidden: !this.showExpandCollapsedIcon,\n                }}\n                name={\n                  this.collapsed ? 'chevron-right-small' : 'chevron-down-small'\n                }\n                onClick={(e) => this.onExpandClick(e)}\n              ></ix-icon>\n            </div>\n\n            <div class=\"group-header-content\">\n              {this.header ? (\n                <div class=\"group-header-props-container\">\n                  <div class=\"group-header-title\">\n                    <span title={this.header}>{this.header}</span>\n                  </div>\n                  <div class=\"group-subheader\" title={this.subHeader}>\n                    {this.subHeader}\n                  </div>\n                </div>\n              ) : null}\n              <slot name=\"header\"></slot>\n            </div>\n          </div>\n          <ix-group-context-menu>\n            <slot name=\"dropdown\"></slot>\n          </ix-group-context-menu>\n        </div>\n        <div\n          class={{\n            'group-content': true,\n          }}\n        >\n          <div\n            style={{\n              display: this.collapsed ? 'none' : 'contents',\n            }}\n          >\n            <slot\n              onSlotchange={() => {\n                const slot =\n                  this.hostElement.shadowRoot?.querySelector(\n                    'slot:not([name])'\n                  );\n                this.showExpandCollapsedIcon = hasSlottedElements(slot);\n              }}\n            ></slot>\n            <ix-group-item\n              suppressSelection={true}\n              focusable={false}\n              class={{\n                footer: true,\n                'footer-visible': this.footerVisible,\n              }}\n            >\n              <slot\n                name=\"footer\"\n                onSlotchange={() => this.onSlotChange()}\n              ></slot>\n            </ix-group-item>\n          </div>\n        </div>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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"}