import{r as t,c as e,h as i,F as s,H as a,g as o}from"./p-f87cd962.js";import{D as h}from"./p-f5e574da.js";const r=":host{display:inline-block;position:relative}:host *,:host *::after,:host *::before{box-sizing:border-box}:host ::-webkit-scrollbar-button{display:none}@-moz-document url-prefix(){:host *{scrollbar-color:var(--theme-scrollbar-thumb--background) var(--theme-scrollbar-track--background);scrollbar-width:thin}}:host ::-webkit-scrollbar{width:0.5rem;height:0.5rem}:host ::-webkit-scrollbar-track{border-radius:5px;background:var(--theme-scrollbar-track--background)}:host ::-webkit-scrollbar-track:hover{background:var(--theme-scrollbar-track--background--hover)}:host ::-webkit-scrollbar-thumb{border-radius:5px;background:var(--theme-scrollbar-thumb--background)}:host ::-webkit-scrollbar-thumb:hover{background:var(--theme-scrollbar-thumb--background--hover)}:host ::-webkit-scrollbar-corner{display:none}@media (max-width: 48em){:host .min-width{width:-moz-min-content;width:min-content}}@media (min-width: 48em){:host .border-right{border-right:var(--theme-x-weak-bdr-2)}}:host ix-button{width:100%}:host .max-height{max-height:-moz-max-content;max-height:max-content}:host .no-margin{margin:0;padding:0}:host .pull-right{float:right;padding:0.25rem 1rem}";const d=r;const n=class{constructor(i){t(this,i);this.dateRangeChange=e(this,"dateRangeChange",7);this.datePickerTouched=false;this.disabled=false;this.format="yyyy/LL/dd";this.range=true;this.from=undefined;this.to=undefined;this.minDate=undefined;this.maxDate=undefined;this.dateRangeId="custom";this.customRangeAllowed=true;this.dateRangeOptions=[];this.i18nCustomItem="Custom...";this.i18nDone="Done";this.i18nNoRange="No range set";this.today=h.now().toISO();this.selectedDateRangeId=undefined;this.currentRangeValue=undefined;this.triggerRef=undefined}onDateRangeIdChange(){this.onRangeListSelect(this.dateRangeId);this.updateCurrentDate();this.setDateRangeSelection(this.dateRangeId);this.onDateSelect({from:this.currentRangeValue.from,to:this.currentRangeValue.to,id:this.currentRangeValue.id})}onDateRangeOptionsChange(){this.initialize();this.onDateRangeIdChange()}onDisabledChange(){if(this.disabled){this.closeDropdown()}}componentWillLoad(){this.initialize();this.setDateRangeSelection(this.dateRangeId)}async getDateRange(){return this.currentRangeValue}initialize(){const t=this.dateRangeId==="custom"||!this.dateRangeId&&!!this.from&&!!this.to;if(t&&this.customRangeAllowed){this.selectedDateRangeId="custom";this.updateCurrentDate();return}const e=!t&&!this.from;if(!e){console.warn('"from" and "range-date-id" is provided this is an invalid combination. Using "custom".');this.selectedDateRangeId="custom";this.updateCurrentDate();return}}updateCurrentDate(){this.currentRangeValue={id:this.selectedDateRangeId,from:this.from,to:this.to}}onDateSelect(t,e=true){this.dateRangeChange.emit(t);if(e){this.closeDropdown()}this.datePickerTouched=false}onRangeListSelect(t){if(this.setDateRangeSelection(t)){this.onDateSelect(this.currentRangeValue)}}setDateRangeSelection(t){this.selectedDateRangeId=t;const e=this.dateRangeOptions.find((e=>e.id===t));if(e){this.currentRangeValue=e}return e}closeDropdown(){this.hostElement.shadowRoot.querySelector("ix-dropdown").show=false}getButtonLabel(){var t,e;if(this.selectedDateRangeId==="custom"&&((t=this.currentRangeValue)===null||t===void 0?void 0:t.from)){let t=this.currentRangeValue.from;if(this.currentRangeValue.to){t+=` - ${this.currentRangeValue.to}`}return t}if(!this.selectedDateRangeId){return this.i18nNoRange}if(!this.dateRangeOptions||((e=this.dateRangeOptions)===null||e===void 0?void 0:e.length)===0){return this.i18nNoRange}const i=this.dateRangeOptions.find((t=>t.id===this.selectedDateRangeId));if(!i){console.error(`Cannot find range option with id ${this.selectedDateRangeId}`);return this.i18nNoRange}return i.label}render(){var t,e,o;return i(a,{key:"d66ef545b12f469b74a6693942a4fdbd7eb60382"},i("ix-button",{key:"8b6c5227aaf9d39fa6b8aa209170f10d9f4e46e8","data-testid":"date-dropdown-trigger","data-date-dropdown-trigger":true,variant:"primary",icon:"history",ref:t=>this.triggerRef=t,disabled:this.disabled},this.getButtonLabel()),i("ix-dropdown",{key:"909f713bc65e1371143ce50b438d5222319b794e","data-testid":"date-dropdown","data-date-dropdown":true,class:"min-width max-height",trigger:this.triggerRef,closeBehavior:"outside",placement:"bottom-start",onShowChanged:({detail:t})=>{if(!t&&this.selectedDateRangeId==="custom"&&this.datePickerTouched){this.onDateSelect(this.currentRangeValue)}}},i("ix-layout-grid",{key:"b8d09d4ddac4960ee2ea23ed9ec6bf5ecb59c5ae","no-margin":"true"},i("ix-row",{key:"fa9099679383056a268265eec7316ced4cd0085a"},((t=this.dateRangeOptions)===null||t===void 0?void 0:t.length)>1&&i("ix-col",{key:"9107d5b1053c93d662568b0efa7bb89d60b80ed6",class:{"no-margin":true,"border-right":this.selectedDateRangeId==="custom"}},this.dateRangeOptions.map((t=>i("ix-dropdown-item",{label:t.label,onClick:()=>this.onRangeListSelect(t.id),checked:this.selectedDateRangeId===t.id}))),i("div",{key:"0a2993cbe4d995e4dd6345e8f1b4e32cb39997d8",hidden:!this.customRangeAllowed},i("ix-dropdown-item",{key:"7bddded3f580f85c9222e563df5ef80a6a5470ed",label:this.i18nCustomItem,checked:this.selectedDateRangeId==="custom",onClick:()=>this.onRangeListSelect("custom")}))),i("ix-col",{key:"fe530809dc0eff3d95e4305ef48d8f46ebaf2a20",class:"no-margin"},this.selectedDateRangeId==="custom"&&i(s,{key:"6fb55cd06c7467fa1277476177b8db788fc6e614"},i("ix-date-picker",{key:"dac5bfab1baa592aaf0db6aaec80b44592c048f9",standaloneAppearance:false,onDateChange:t=>{t.stopPropagation();this.currentRangeValue=Object.assign(Object.assign({},t.detail),{id:"custom"});this.datePickerTouched=true},onDateRangeChange:t=>t.stopPropagation(),format:this.format,range:this.range,from:this.from||((e=this.currentRangeValue)===null||e===void 0?void 0:e.from),to:this.to||((o=this.currentRangeValue)===null||o===void 0?void 0:o.to),minDate:this.minDate,maxDate:this.maxDate,today:this.today}),i("div",{key:"613a674664d2b55a8012fc2b869021e8dfeb10b3",class:"pull-right"},i("ix-button",{key:"9d5470cfb8ddb6e086bb821baaefb25723777337",onClick:()=>{this.onDateSelect(this.currentRangeValue)}},this.i18nDone))))))))}get hostElement(){return o(this)}static get watchers(){return{dateRangeId:["onDateRangeIdChange"],to:["onDateRangeIdChange"],from:["onDateRangeIdChange"],dateRangeOptions:["onDateRangeOptionsChange"],disabled:["onDisabledChange"]}}};n.style=d;export{n as ix_date_dropdown};
//# sourceMappingURL=p-a0138163.entry.js.map